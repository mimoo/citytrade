var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a;import{W as s,C as o,f as r,d as l,r as u,a as p,o as y,c as d,b as c,e as m,w as f,F as b,g as v,h as w,s as g,i as h,u as x,t as _,j as M,k,l as I,m as C}from"./vendor.76e151a9.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();new s(window.ethereum);const S=new s(window.ethereum),O=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"countries",outputs:[{name:"name",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"monuments",outputs:[{name:"name",type:"string"},{name:"price",type:"uint256"},{name:"owner",type:"address"},{name:"cityId",type:"uint16"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"BUY_CITY_FEE",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"UNITED_NATIONS_FUND",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"ECONOMY_BOOST_TRADE",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_subtractedValue",type:"uint256"}],name:"decreaseApproval",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"cities",outputs:[{name:"name",type:"string"},{name:"price",type:"uint256"},{name:"owner",type:"address"},{name:"countryId",type:"uint16"},{name:"buyable",type:"bool"},{name:"last_purchase_price",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"unitedNations",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_amount",type:"uint256"}],name:"adminWithdraw",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"MONUMENT_UN_FEE",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_monumentId",type:"uint256"},{name:"_price",type:"uint256"}],name:"buyMonument",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_cityId",type:"uint16"}],name:"resolveSellCityForEther",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"offers",outputs:[{name:"cityId",type:"uint16"},{name:"price",type:"uint256"},{name:"from",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_cityId",type:"uint16"},{name:"_price",type:"uint256"}],name:"sellCityForEther",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_cityId",type:"uint16"}],name:"cancelSellCityForEther",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_cityId",type:"uint16"}],name:"buyCity",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_name",type:"string"},{name:"_price",type:"uint256"},{name:"_countryId",type:"uint16"}],name:"adminAddCity",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"MAX_CITIES",outputs:[{name:"",type:"uint16"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"ECONOMY_BOOST",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_offerId",type:"uint256"}],name:"cancelOfferForCity",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_name",type:"string"},{name:"_price",type:"uint256"},{name:"_cityId",type:"uint16"}],name:"adminAddMonument",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalOffer",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"MONUMENT_CITY_FEE",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_addedValue",type:"uint256"}],name:"increaseApproval",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_name",type:"string"}],name:"adminAddCountry",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_offerId",type:"uint256"},{name:"_cityId",type:"uint16"},{name:"_price",type:"uint256"}],name:"acceptOfferForCity",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_cityId",type:"uint16"},{name:"_owner",type:"address"}],name:"AdminBuyForSomeone",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_cityId",type:"uint16"},{name:"_price",type:"uint256"},{name:"from",type:"address"}],name:"makeOfferForCityForSomeone",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_cityId",type:"uint16"},{name:"_price",type:"uint256"}],name:"makeOfferForCity",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[{name:"_cityId",type:"uint16"},{name:"_name",type:"string"},{name:"_price",type:"uint256"},{name:"_owner",type:"address"}],name:"adminEditCity",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"cityId",type:"uint256"},{indexed:!1,name:"name",type:"string"},{indexed:!1,name:"price",type:"uint256"},{indexed:!1,name:"countryId",type:"uint16"}],name:"NewCity",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"monumentId",type:"uint256"},{indexed:!1,name:"name",type:"string"},{indexed:!1,name:"price",type:"uint256"},{indexed:!1,name:"cityId",type:"uint16"}],name:"NewMonument",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"cityId",type:"uint16"},{indexed:!1,name:"price",type:"uint256"}],name:"CityForSale",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"cityId",type:"uint16"},{indexed:!1,name:"price",type:"uint256"},{indexed:!1,name:"previousOwner",type:"address"},{indexed:!1,name:"newOwner",type:"address"},{indexed:!1,name:"offerId",type:"uint256"}],name:"CitySold",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"monumentId",type:"uint256"},{indexed:!1,name:"price",type:"uint256"}],name:"MonumentSold",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"cityId",type:"uint16"}],name:"CityNotForSale",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"offerId",type:"uint256"},{indexed:!1,name:"cityId",type:"uint16"},{indexed:!1,name:"price",type:"uint256"},{indexed:!1,name:"offererAddress",type:"address"},{indexed:!1,name:"owner",type:"address"}],name:"OfferForCity",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"offerId",type:"uint256"}],name:"CancelOfferForCity",type:"event"}];async function j(e){let t=await S.lookupAddress(e);return null==t?e.substr(0,10)+"...":(console.log("found name:",t),t)}async function F(e,t){let n=await e.cities(t),a=n.owner,i=await j(a);n.monuments,r(n.last_purchase_price.toString());let s=null;return n.buyable&&(s=r(n.price.toString())),{owner:a,owner_ens:i,buyable:s}}const E=l("main",{state:()=>({cities:{},offers:{pending:[]},balances:{}}),getters:{pending:e=>e.offers.pending.map((s=>((e,s)=>{for(var o in s||(s={}))n.call(s,o)&&i(e,o,s[o]);if(t)for(var o of t(s))a.call(s,o)&&i(e,o,s[o]);return e})({name:e.cities[s.city_id].name},s))),pending_desc(){let e=this.pending;return e.sort(((e,t)=>e.price.gt(t.price)?-1:1)),e}},actions:{async init(){let e=new o("0x4bdde1e9fbaef2579dd63e2abbf0be445ab93f10",O,S);this.cities=await async function(e){let t={},n=e.filters.NewCity(),a=await e.queryFilter(n);for(let i of a){let e=i.args.cityId,n=e.toString(),a=i.args.name,s=r(i.args.price.toString()),o=i.args.countryId;t[n]={raw_city_id:e,country_id:o,name:a,owner:null,init_price:s,last_purchase_price:null,buyable:null}}return t}(e);let{pending:t,city_sold:n,offers:a,void_offers:i,offers_cancelled:s}=await async function(e){let t=e.filters.OfferForCity(),n=await e.queryFilter(t);console.log("offers:",n);let a=e.filters.CancelOfferForCity(),i=await e.queryFilter(a);console.log("offers_cancelled:",i);let s=e.filters.CitySold(),o=await e.queryFilter(s);console.log("city_sold:",o);var l=new Set;for(let r of o)l.add(r.args.offerId.toString());for(let r of i)l.add(r.args.offerId.toString());console.log("void_offers:",l);let u=n.filter((e=>!l.has(e.args.offerId.toString()))),p=[];for(let y of u){let e=y.args.offerId.toString(),t=y.args.cityId.toString(),n=y.args.price,a=r(n.toString()),i=y.args.offererAddress,s=await j(i);y.args.owner,p.push({offer_id:e,city_id:t,price:n,price_str:a,from:i,from_ens:s})}return u.sort(((e,t)=>e.args.price.gt(t.args.price)?-1:1)),console.log(p),{pending:p,city_sold:o,offers:n,void_offers:l,offers_cancelled:i}}(e);this.offers.pending=t;for(const[o,r]of Object.entries(this.cities)){let{owner:t,owner_ens:n,buyable:a}=await F(e,r.raw_city_id);this.cities[o].owner=t,this.cities[o].owner_ens=n,this.cities[o].buyable=a}}}}),N={class:"text-gray-600 body-font"},T={class:"container mx-auto flex flex-wrap p-5 flex-col md:flex-row items-center"},B=v('<a class="flex title-font font-medium items-center text-gray-900 mb-4 md:mb-0"><svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-10 h-10 text-white p-2 bg-indigo-500 rounded-full" viewBox="0 0 24 24"><path d="M5 5L5 5l5 10 10-5-10-5zM2 15l20 0"></path></svg><span class="ml-3 text-xl"> City <span class="text-indigo-600">Trade</span></span></a>',1),A={class:"md:mr-auto md:ml-4 md:py-1 md:pl-4 md:border-l md:border-gray-400 flex flex-wrap items-center text-base justify-center"},H=w("Browse"),P=w("Buy"),V=w("Sell"),z=w("CITY wallet"),L=w("How to?"),U=c("button",{class:"inline-flex items-center bg-gray-100 border-0 py-1 px-3 focus:outline-none hover:bg-gray-200 rounded text-base mt-4 md:mt-0"},"Register",-1),Y={setup:e=>(E().init(),u(0),(e,t)=>{const n=p("router-link"),a=p("router-view");return y(),d(b,null,[c("header",N,[c("div",T,[B,c("nav",A,[m(n,{to:"/",class:"mr-5 hover:text-gray-900"},{default:f((()=>[H])),_:1}),m(n,{to:"/buy",class:"mr-5 hover:text-gray-900"},{default:f((()=>[P])),_:1}),m(n,{to:"/sell",class:"mr-5 hover:text-gray-900"},{default:f((()=>[V])),_:1}),m(n,{to:"/wallet",class:"mr-5 hover:text-gray-900"},{default:f((()=>[z])),_:1}),m(n,{to:"/howto",class:"mr-5 hover:text-gray-900"},{default:f((()=>[L])),_:1})]),U])]),c("main",null,[m(a)])],64)})},q=c("h1",null,"Cities",-1),D={class:"text-gray-600 body-font"},K={class:"container px-5 py-24 mx-auto"},R={class:"flex flex-wrap -m-4"},W={class:"lg:w-1/4 md:w-1/2 p-4 w-full"},X=c("a",{class:"block relative h-48 rounded overflow-hidden"},[c("img",{alt:"ecommerce",class:"object-cover object-center w-full h-full block",src:"https://dummyimage.com/420x260"})],-1),G={class:"mt-4"},J={class:"text-gray-500 text-xs tracking-widest title-font mb-1"},Q={class:"text-gray-900 title-font text-lg font-medium"},Z={key:0,class:"mt-1"},$={key:1,class:"mt-1"},ee={setup(e){const t=E(),{cities:n}=g(t);return(e,t)=>(y(),d(b,null,[q,c("section",D,[c("div",K,[c("div",R,[(y(!0),d(b,null,h(x(n),(e=>(y(),d("div",W,[X,c("div",G,[c("h3",J,_(e.owner),1),c("h2",Q,_(e.name),1),e.buyable?(y(),d("p",Z,_(e.buyable)+" ETH",1)):(y(),d("p",$,"make an offer"))])])))),256))])])]),c("ul",null,[(y(!0),d(b,null,h(x(n),(e=>(y(),d("li",null,_(e),1)))),256))])],64))}},te=c("h1",null,"Pending offers",-1),ne={setup(e){const t=E(),{pending_desc:n}=g(t);return(e,t)=>(y(),d(b,null,[te,c("ul",null,[(y(!0),d(b,null,h(x(n),(e=>(y(),d("li",null,"#"+_(e.offer_id)+": "+_(e.from_ens)+" is offering "+_(e.price_str)+" for "+_(e.name),1)))),256))])],64))}},ae={},ie={class:"text-gray-600 body-font"},se=[v('<div class="container px-5 py-24 mx-auto flex flex-wrap"><div class="flex flex-wrap w-full"><div class="lg:w-2/5 md:w-1/2 md:pr-10 md:py-6"><div class="flex relative pb-12"><div class="h-full w-10 absolute inset-0 flex items-center justify-center"><div class="h-full w-1 bg-gray-200 pointer-events-none"></div></div><div class="flex-shrink-0 w-10 h-10 rounded-full bg-indigo-500 inline-flex items-center justify-center text-white relative z-10"><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-5 h-5" viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg></div><div class="flex-grow pl-4"><h2 class="font-medium title-font text-sm text-gray-900 mb-1 tracking-wider">STEP 1</h2><p class="leading-relaxed">VHS cornhole pop-up, try-hard 8-bit iceland helvetica. Kinfolk bespoke try-hard cliche palo santo offal.</p></div></div><div class="flex relative pb-12"><div class="h-full w-10 absolute inset-0 flex items-center justify-center"><div class="h-full w-1 bg-gray-200 pointer-events-none"></div></div><div class="flex-shrink-0 w-10 h-10 rounded-full bg-indigo-500 inline-flex items-center justify-center text-white relative z-10"><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-5 h-5" viewBox="0 0 24 24"><path d="M22 12h-4l-3 9L9 3l-3 9H2"></path></svg></div><div class="flex-grow pl-4"><h2 class="font-medium title-font text-sm text-gray-900 mb-1 tracking-wider">STEP 2</h2><p class="leading-relaxed">Vice migas literally kitsch +1 pok pok. Truffaut hot chicken slow-carb health goth, vape typewriter.</p></div></div><div class="flex relative pb-12"><div class="h-full w-10 absolute inset-0 flex items-center justify-center"><div class="h-full w-1 bg-gray-200 pointer-events-none"></div></div><div class="flex-shrink-0 w-10 h-10 rounded-full bg-indigo-500 inline-flex items-center justify-center text-white relative z-10"><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-5 h-5" viewBox="0 0 24 24"><circle cx="12" cy="5" r="3"></circle><path d="M12 22V8M5 12H2a10 10 0 0020 0h-3"></path></svg></div><div class="flex-grow pl-4"><h2 class="font-medium title-font text-sm text-gray-900 mb-1 tracking-wider">STEP 3</h2><p class="leading-relaxed">Coloring book nar whal glossier master cleanse umami. Salvia +1 master cleanse blog taiyaki.</p></div></div><div class="flex relative pb-12"><div class="h-full w-10 absolute inset-0 flex items-center justify-center"><div class="h-full w-1 bg-gray-200 pointer-events-none"></div></div><div class="flex-shrink-0 w-10 h-10 rounded-full bg-indigo-500 inline-flex items-center justify-center text-white relative z-10"><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-5 h-5" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg></div><div class="flex-grow pl-4"><h2 class="font-medium title-font text-sm text-gray-900 mb-1 tracking-wider">STEP 4</h2><p class="leading-relaxed">VHS cornhole pop-up, try-hard 8-bit iceland helvetica. Kinfolk bespoke try-hard cliche palo santo offal.</p></div></div><div class="flex relative"><div class="flex-shrink-0 w-10 h-10 rounded-full bg-indigo-500 inline-flex items-center justify-center text-white relative z-10"><svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-5 h-5" viewBox="0 0 24 24"><path d="M22 11.08V12a10 10 0 11-5.93-9.14"></path><path d="M22 4L12 14.01l-3-3"></path></svg></div><div class="flex-grow pl-4"><h2 class="font-medium title-font text-sm text-gray-900 mb-1 tracking-wider">FINISH</h2><p class="leading-relaxed">Pitchfork ugh tattooed scenester echo park gastropub whatever cold-pressed retro.</p></div></div></div><img class="lg:w-3/5 md:w-1/2 object-cover object-center rounded-lg md:mt-0 mt-12" src="https://dummyimage.com/1200x500" alt="step"></div></div>',1)];ae.render=function(e,t){return y(),d("section",ie,se)};const oe={},re={class:"bg-white shadow"},le=[c("div",{class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},[c("h1",{class:"text-3xl font-bold leading-tight text-gray-900"},"Not Found")],-1)];oe.render=function(e,t){return y(),d("header",re,le)};const ue=[{path:"/",component:ee,meta:{title:"Browse"}},{path:"/Buy",meta:{title:"Buy"},component:ne},{path:"/HowTo",meta:{title:"HowTo"},component:ae},{path:"/:path(.*)",component:oe}];window.provider=new s(window.ethereum);const pe=M(Y),ye=k({history:I(),routes:ue});pe.use(ye),pe.use(C()),pe.mount("#app");
